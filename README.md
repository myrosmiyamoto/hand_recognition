# æ‰‹ã®å‹•ãã‚’æ¤œå‡ºã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®èª¬æ˜Ž

`hand_amovement.py` ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ã¤ã„ã¦èª¬æ˜Žã—ã¾ã™ã€‚

## 1. ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ä½•ã‚’ã™ã‚‹ã®ï¼Ÿ
ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ **PCã«ã¤ã„ã¦ã„ã‚‹ã‚«ãƒ¡ãƒ©ã‚’ä½¿ã£ã¦æ‰‹ã®å‹•ãã‚’æ¤œå‡ºã—ã€å‹•ã„ã¦ã„ã‚‹æ–¹å‘ã‚’è¡¨ç¤º** ã™ã‚‹ã‚‚ã®ã§ã™ã€‚Pythonã® **OpenCV** ã¨ **MediaPipe** ã‚’ä½¿ã£ã¦ã€æ‰‹ã®ä½ç½®ã‚’èªè­˜ã—ã€ã©ã®æ–¹å‘ã«å‹•ã„ã¦ã„ã‚‹ã‹ã‚’åˆ¤æ–­ã—ã¾ã™ã€‚

## 2. å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒª
ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«ã¯ã€ä»¥ä¸‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```bash
pip install opencv-python mediapipe numpy
```

## 3. ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ä»•çµ„ã¿
### (1) ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®èª­ã¿è¾¼ã¿
```python
import cv2
import mediapipe as mp
import numpy as np
```
OpenCVï¼ˆcv2ï¼‰ã¯ã‚«ãƒ¡ãƒ©æ˜ åƒã‚’æ‰±ã†ãŸã‚ã«ä½¿ç”¨ã—ã€MediaPipeï¼ˆmpï¼‰ã¯æ‰‹ã®ãƒ©ãƒ³ãƒ‰ãƒžãƒ¼ã‚¯ï¼ˆç‰¹å¾´ç‚¹ï¼‰ã‚’æ¤œå‡ºã™ã‚‹ãŸã‚ã«ä½¿ã„ã¾ã™ã€‚

### (2) ã‚«ãƒ¡ãƒ©ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```python
cap = cv2.VideoCapture(0)
cap.set(cv2.CAP_PROP_BUFFERSIZE, 1)
```
ã“ã“ã§ã¯ **ã‚«ãƒ¡ãƒ©ã‚’èµ·å‹•** ã—ã€æ˜ åƒã®å¹…ã¨é«˜ã•ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚

### (3) æ‰‹ã®æ¤œå‡ºã‚’è¡Œã†æº–å‚™
```python
mp_hands = mp.solutions.hands
mp_drawing = mp.solutions.drawing_utils
```
MediaPipeã® **æ‰‹ã®æ¤œå‡ºæ©Ÿèƒ½** ã‚’ä½¿ã†ãŸã‚ã®æº–å‚™ã‚’è¡Œã„ã¾ã™ã€‚

### (4) æ‰‹ã®æ¤œå‡ºã¨å‹•ãã®åˆ†æž
```python
with mp_hands.Hands(
    static_image_mode=False,
    max_num_hands=1,
    model_complexity=0,
    min_detection_confidence=0.7,
    min_tracking_confidence=0.7
) as hands:
```
ã“ã®éƒ¨åˆ†ã§ã¯ã€æ‰‹ã®ãƒ©ãƒ³ãƒ‰ãƒžãƒ¼ã‚¯ã‚’æ¤œå‡ºã™ã‚‹è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚

- `max_num_hands=1` â†’ **æ¤œå‡ºã™ã‚‹æ‰‹ã¯1ã¤** ã«åˆ¶é™
- `min_detection_confidence=0.7` â†’ **æ¤œå‡ºã®ä¿¡é ¼åº¦**ï¼ˆ70%ä»¥ä¸Šã§æ‰‹ã‚’æ¤œå‡ºï¼‰
- `min_tracking_confidence=0.7` â†’ **è¿½è·¡ã®ä¿¡é ¼åº¦**ï¼ˆ70%ä»¥ä¸Šã§æ‰‹ã®å‹•ãã‚’è¿½è·¡ï¼‰

### (5) ã‚«ãƒ¡ãƒ©æ˜ åƒã®å–å¾—ã¨æ‰‹ã®ãƒ©ãƒ³ãƒ‰ãƒžãƒ¼ã‚¯æ¤œå‡º
```python
ret, frame = cap.read()
frame = cv2.flip(frame, 1)
rgb_frame = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)
result = hands.process(rgb_frame)
```
- `cap.read()` ã§ã‚«ãƒ¡ãƒ©ã‹ã‚‰æ˜ åƒã‚’å–å¾—
- `cv2.flip(frame, 1)` ã§ **é¡ã®ã‚ˆã†ã«å·¦å³ã‚’åè»¢**
- `cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)` ã§ **è‰²ç©ºé–“ã‚’BGRã‹ã‚‰RGBã«å¤‰æ›**
- `hands.process(rgb_frame)` ã§ **æ‰‹ã®ãƒ©ãƒ³ãƒ‰ãƒžãƒ¼ã‚¯ã‚’æ¤œå‡º**

### (6) æ‰‹ã®ãƒ©ãƒ³ãƒ‰ãƒžãƒ¼ã‚¯ã®æç”»
```python
if result.multi_hand_landmarks:
    for hand_landmarks in result.multi_hand_landmarks:
        mp_drawing.draw_landmarks(frame, hand_landmarks, mp_hands.HAND_CONNECTIONS)
```
**æ‰‹ã®ç‰¹å¾´ç‚¹ï¼ˆãƒ©ãƒ³ãƒ‰ãƒžãƒ¼ã‚¯ï¼‰ã‚’ã‚«ãƒ¡ãƒ©æ˜ åƒã«æç”»** ã—ã¾ã™ã€‚

### (7) æ‰‹ã®ä¸­å¿ƒåº§æ¨™ã‚’è¨ˆç®—
```python
x_coords = [lm.x for lm in hand_landmarks.landmark]
y_coords = [lm.y for lm in hand_landmarks.landmark]
center_x = np.mean(x_coords)
center_y = np.mean(y_coords)
```
æ‰‹ã®ç‰¹å¾´ç‚¹ã®xåº§æ¨™ã¨yåº§æ¨™ã‚’ãƒªã‚¹ãƒˆã«æ ¼ç´ã—ã€**æ‰‹ã®ä¸­å¿ƒä½ç½®ã‚’æ±‚ã‚ã¾ã™**ã€‚

### (8) æ‰‹ã®å‹•ãæ–¹å‘ã‚’åˆ¤å®š
```python
if prev_position:
    dx = center_x - prev_position[0]
    dy = center_y - prev_position[1]

    direction = "Still"
    threshold = 0.02  # å°ã•ã„å‹•ãã¯ç„¡è¦–
    if abs(dx) > abs(dy):
        if dx > threshold:
            direction = "Right"
        elif dx < -threshold:
            direction = "Left"
    else:
        if dy > threshold:
            direction = "Down"
        elif dy < -threshold:
            direction = "Up"

    cv2.putText(frame, f"movement: {direction}", (10, 50),
                cv2.FONT_HERSHEY_SIMPLEX, 1, (255, 0, 0), 2)
```
- **å‰ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã¨ã®ä½ç½®ã®å·®** ã‚’è¨ˆç®—ã—ã¦ã€
  - **å³ã«å‹•ã„ãŸã‚‰ "Right"**
  - **å·¦ã«å‹•ã„ãŸã‚‰ "Left"**
  - **ä¸Šã«å‹•ã„ãŸã‚‰ "Up"**
  - **ä¸‹ã«å‹•ã„ãŸã‚‰ "Down"**
  - **å‹•ã„ã¦ã„ãªã‘ã‚Œã° "Still"**

- `cv2.putText()` ã‚’ä½¿ã£ã¦ **ç”»é¢ã«å‹•ãã®æ–¹å‘ã‚’è¡¨ç¤º** ã—ã¾ã™ã€‚

### (9) ã‚«ãƒ¡ãƒ©æ˜ åƒã‚’è¡¨ç¤º
```python
cv2.imshow('Hand Movement Detection', frame)
```
ã‚«ãƒ¡ãƒ©æ˜ åƒã‚’ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã«è¡¨ç¤ºã—ã¾ã™ã€‚

### (10) ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®çµ‚äº†å‡¦ç†
```python
if cv2.waitKey(1) & 0xFF == ord('q'):
    break
cap.release()
cv2.destroyAllWindows()
```
'q'ã‚­ãƒ¼ã‚’æŠ¼ã™ã¨ **ã‚«ãƒ¡ãƒ©ã‚’åœæ­¢ã—ã€ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ã¾ã™**ã€‚

## 4. å®Ÿè¡Œæ–¹æ³•
ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼ˆã¾ãŸã¯ã‚³ãƒžãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼‰ã§ã€Pythonãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
```bash
python hand_amovement.py
```

PCã®ã‚«ãƒ¡ãƒ©æ˜ åƒãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
æ‰‹ã‚’ã‚«ãƒ¡ãƒ©ã«æ˜ ã™ã¨ã‚«ãƒ¡ãƒ©æ˜ åƒã«æ‰‹ã®å‹•ããŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

**'q'ã‚­ãƒ¼ã‚’æŠ¼ã™ã¨ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒçµ‚äº†** ã—ã¾ã™ã€‚

## 5. ã¾ã¨ã‚
- **Webã‚«ãƒ¡ãƒ©ã‚’ä½¿ã£ã¦æ‰‹ã®å‹•ãã‚’æ¤œå‡º**
- **æ‰‹ã®ä¸­å¿ƒã‚’æ±‚ã‚ã€å‰ã®ä½ç½®ã¨æ¯”è¼ƒã—ã¦å‹•ãæ–¹å‘ã‚’åˆ¤å®š**
- **çµæžœã‚’ç”»é¢ã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º**
- **'q'ã‚­ãƒ¼ã‚’æŠ¼ã™ã¨ãƒ—ãƒ­ã‚°ãƒ©ãƒ çµ‚äº†**

---

# æ‰‹ã®ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã‚’èªè­˜ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®èª¬æ˜Ž

`hand_gesture.py` ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ã¤ã„ã¦èª¬æ˜Žã—ã¾ã™ã€‚

## 1. ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã§ãã‚‹ã“ã¨
ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€**ã‚«ãƒ¡ãƒ©ã‚’ä½¿ã£ã¦æ‰‹ã®å½¢ï¼ˆã‚°ãƒ¼ãƒ»ãƒãƒ§ã‚­ãƒ»ãƒ‘ãƒ¼ï¼‰ã‚’èªè­˜** ã—ã¾ã™ã€‚
- **ã‚°ãƒ¼ï¼ˆrockï¼‰** : ã™ã¹ã¦ã®æŒ‡ã‚’é–‰ã˜ãŸçŠ¶æ…‹
- **ãƒãƒ§ã‚­ï¼ˆscissorsï¼‰** : äººå·®ã—æŒ‡ã¨ä¸­æŒ‡ã ã‘é–‹ã„ãŸçŠ¶æ…‹
- **ãƒ‘ãƒ¼ï¼ˆpaperï¼‰** : ã™ã¹ã¦ã®æŒ‡ã‚’é–‹ã„ãŸçŠ¶æ…‹

ã‚«ãƒ¡ãƒ©ã«æ‰‹ã‚’æ˜ ã™ã¨ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã‚’åˆ¤å®šã—ã€ç”»é¢ã«çµæžœã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

## 2. å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒª
ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã™ã‚‹å‰ã«ã€ä»¥ä¸‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚
```bash
pip install opencv-python mediapipe numpy
```

## 3. ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å‹•ä½œã®ä»•çµ„ã¿

### (1) ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
```python
import cv2
import mediapipe as mp
import numpy as np
```
ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã¯ã€ä»¥ä¸‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
- **OpenCVï¼ˆcv2ï¼‰** : ç”»åƒå‡¦ç†ã‚„ã‚«ãƒ¡ãƒ©ã®æ˜ åƒå–å¾—
- **MediaPipeï¼ˆmpï¼‰** : æ‰‹ã®ãƒ©ãƒ³ãƒ‰ãƒžãƒ¼ã‚¯ï¼ˆç‰¹å¾´ç‚¹ï¼‰ã‚’æ¤œå‡º
- **NumPyï¼ˆnpï¼‰** : é…åˆ—è¨ˆç®—ã«åˆ©ç”¨

### (2) MediaPipeã®åˆæœŸåŒ–
```python
mp_hands = mp.solutions.hands
mp_drawing = mp.solutions.drawing_utils
```
MediaPipeã®æ‰‹ã®æ¤œå‡ºã‚’è¨­å®šã—ã€**æ‰‹ã®ãƒ©ãƒ³ãƒ‰ãƒžãƒ¼ã‚¯ã‚’æç”»** ã™ã‚‹ãŸã‚ã®æº–å‚™ã‚’è¡Œã„ã¾ã™ã€‚

```python
hands = mp_hands.Hands(
    static_image_mode=False,
    max_num_hands=1,
    model_complexity=0,
    min_detection_confidence=0.7,
    min_tracking_confidence=0.7
)
```
- **max_num_hands=1** â†’ æ¤œå‡ºã™ã‚‹æ‰‹ã¯æœ€å¤§1ã¤
- **min_detection_confidence=0.7** â†’ æ¤œå‡ºã®ä¿¡é ¼åº¦ãŒ70%ä»¥ä¸Šãªã‚‰èªè­˜
- **min_tracking_confidence=0.7** â†’ è¿½è·¡ã®ä¿¡é ¼åº¦ãŒ70%ä»¥ä¸Šãªã‚‰è¿½è·¡

### (3) æŒ‡ã®å½¢çŠ¶ã‚’åˆ¤å®šã™ã‚‹é–¢æ•°
```python
def recognize_gesture(landmarks):
```
æŒ‡ã®é–¢ç¯€ã® **yåº§æ¨™** ã‚’æ¯”è¼ƒã—ã¦ã€æŒ‡ãŒé–‹ã„ã¦ã„ã‚‹ã‹é–‰ã˜ã¦ã„ã‚‹ã‹ã‚’åˆ¤å®šã—ã¾ã™ã€‚

- **è¦ªæŒ‡ã®åˆ¤å®š**
  ```python
  fingers.append(landmarks[4].x < landmarks[3].x)
  ```
  â†’ **å·¦æ‰‹ã¨å³æ‰‹ã§xåº§æ¨™ã®åˆ¤å®šãŒé€†** ã«ãªã‚‹ã“ã¨ã«æ³¨æ„ã€‚

- **äººå·®ã—æŒ‡ï½žå°æŒ‡ã®åˆ¤å®š**
  ```python
  fingers.append(landmarks[tip_id].y < landmarks[tip_id - 2].y)
  ```
  â†’ **æŒ‡å…ˆã®yåº§æ¨™ãŒç¬¬äºŒé–¢ç¯€ã‚ˆã‚Šä¸Šã«ã‚ã‚‹ã‹ã©ã†ã‹** ã§åˆ¤å®šã€‚

- **ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã‚’è­˜åˆ¥**
  ```python
  if all(fingers[1:]):
      return "paper"
  elif not any(fingers):
      return "rock"
  elif fingers[1] and fingers[2] and not fingers[3] and not fingers[4]:
      return "scissors"
  return "nothing"
  ```
  - **ã™ã¹ã¦ã®æŒ‡ãŒé–‹ã„ã¦ã„ã‚Œã°ã€Œãƒ‘ãƒ¼ã€**
  - **ã™ã¹ã¦ã®æŒ‡ãŒé–‰ã˜ã¦ã„ã‚Œã°ã€Œã‚°ãƒ¼ã€**
  - **äººå·®ã—æŒ‡ã¨ä¸­æŒ‡ã ã‘é–‹ã„ã¦ã„ã‚Œã°ã€Œãƒãƒ§ã‚­ã€**

### (4) ã‚«ãƒ¡ãƒ©ã®è¨­å®š
```python
cap = cv2.VideoCapture(0)
```
- **ã‚«ãƒ¡ãƒ©ã‚’èµ·å‹•** ã—ã¦æ˜ åƒã‚’å–å¾—ã—ã¾ã™ã€‚
- ç”»åƒã‚µã‚¤ã‚ºã‚’ **åŠåˆ†ã«ç¸®å°** ã—ã¦å‡¦ç†ã®è² è·ã‚’æ¸›ã‚‰ã—ã¾ã™ã€‚
  ```python
  width = int(cap.get(cv2.CAP_PROP_FRAME_WIDTH) / 2)
  height = int(cap.get(cv2.CAP_PROP_FRAME_HEIGHT) / 2)
  cap.set(cv2.CAP_PROP_FRAME_WIDTH, width)
  cap.set(cv2.CAP_PROP_FRAME_HEIGHT, height)
  ```

### (5) ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ—ï¼ˆã‚«ãƒ¡ãƒ©æ˜ åƒã®å‡¦ç†ï¼‰
```python
while cap.isOpened():
```
**ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã‚«ãƒ¡ãƒ©æ˜ åƒã‚’å–å¾—ã—ã€æ‰‹ã®ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã‚’èªè­˜** ã—ã¾ã™ã€‚

1. **ç”»åƒã‚’RGBã«å¤‰æ›**
   ```python
   image = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)
   ```
   OpenCVã¯BGRå½¢å¼ã‚’ä½¿ã†ãŸã‚ã€MediaPipeã§å‡¦ç†ã§ãã‚‹ã‚ˆã†ã«RGBã«å¤‰æ›ã—ã¾ã™ã€‚

2. **æ‰‹ã®ãƒ©ãƒ³ãƒ‰ãƒžãƒ¼ã‚¯ã‚’æ¤œå‡º**
   ```python
   results = hands.process(image)
   ```
   `hands.process(image)` ã‚’ä½¿ã£ã¦æ‰‹ã®ãƒ©ãƒ³ãƒ‰ãƒžãƒ¼ã‚¯ã‚’å–å¾—ã—ã¾ã™ã€‚

3. **æ‰‹ã®ãƒ©ãƒ³ãƒ‰ãƒžãƒ¼ã‚¯ã‚’æç”»**
   ```python
   if results.multi_hand_landmarks:
       for hand_landmarks in results.multi_hand_landmarks:
           mp_drawing.draw_landmarks(image, hand_landmarks, mp_hands.HAND_CONNECTIONS)
   ```
   â†’ **æ‰‹ã®é–¢ç¯€ã‚’ç”»é¢ã«è¡¨ç¤º** ã—ã¾ã™ã€‚

4. **ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã‚’åˆ¤å®šã—ã€ç”»é¢ã«è¡¨ç¤º**
   ```python
   gesture = recognize_gesture(hand_landmarks.landmark)
   cv2.putText(image, gesture, (10, 50), cv2.FONT_HERSHEY_SIMPLEX, 1, (0, 255, 0), 2, cv2.LINE_AA)
   ```
   â†’ **èªè­˜ã—ãŸã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã‚’æ˜ åƒã«ãƒ†ã‚­ã‚¹ãƒˆã¨ã—ã¦è¡¨ç¤º** ã—ã¾ã™ã€‚

### (6) ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®çµ‚äº†
```python
if cv2.waitKey(10) & 0xFF == ord('q'):
    break
```
- **'q'ã‚­ãƒ¼ã‚’æŠ¼ã™ã¨ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒçµ‚äº†** ã—ã¾ã™ã€‚

## 4. å®Ÿè¡Œæ–¹æ³•
1. ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã¾ãŸã¯ã‚³ãƒžãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã€ä»¥ä¸‹ã®ã‚³ãƒžãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
   ```bash
   python hand_gesture.py
   ```
2. **ã‚«ãƒ¡ãƒ©ã®å‰ã§æ‰‹ã‚’å‹•ã‹ã™** ã¨ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã€Œã‚°ãƒ¼ã€ã€ã€Œãƒãƒ§ã‚­ã€ã€ã€Œãƒ‘ãƒ¼ã€ã‚’åˆ¤å®šã—ã¾ã™ã€‚
3. **çµ‚äº†ã™ã‚‹ã¨ãã¯ 'q'ã‚­ãƒ¼ ã‚’æŠ¼ã—ã¾ã™ã€‚**

## 5. ã¾ã¨ã‚
- **æ‰‹ã®ãƒ©ãƒ³ãƒ‰ãƒžãƒ¼ã‚¯ã‚’æ¤œå‡º** ã—ã¦ã€æŒ‡ãŒé–‹ã„ã¦ã„ã‚‹ã‹é–‰ã˜ã¦ã„ã‚‹ã‹ã‚’åˆ¤å®š
- **ã€Œã‚°ãƒ¼ã€ã€ã€Œãƒãƒ§ã‚­ã€ã€ã€Œãƒ‘ãƒ¼ã€ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§èªè­˜**
- **ç”»é¢ã«çµæžœã‚’è¡¨ç¤º** ã™ã‚‹

---

# ä¸¡æ‰‹ã®ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã‚’èªè­˜ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®èª¬æ˜Ž

`both_hands_gesture.py` ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ã¤ã„ã¦èª¬æ˜Žã—ã¾ã™ã€‚

## 1. ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã§ãã‚‹ã“ã¨
ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã¯ã€**ã‚«ãƒ¡ãƒ©ã‚’ä½¿ã£ã¦æ‰‹ã®å½¢ï¼ˆã‚°ãƒ¼ãƒ»ãƒãƒ§ã‚­ãƒ»ãƒ‘ãƒ¼ãƒ»ðŸ‘ï¸ï¼‰ã‚’èªè­˜** ã§ãã¾ã™ã€‚
- **ã‚°ãƒ¼ï¼ˆRockï¼‰** : ã™ã¹ã¦ã®æŒ‡ã‚’é–‰ã˜ãŸçŠ¶æ…‹
- **ãƒãƒ§ã‚­ï¼ˆScissorsï¼‰** : äººå·®ã—æŒ‡ã¨ä¸­æŒ‡ã ã‘é–‹ã„ãŸçŠ¶æ…‹
- **ãƒ‘ãƒ¼ï¼ˆPaperï¼‰** : ã™ã¹ã¦ã®æŒ‡ã‚’é–‹ã„ãŸçŠ¶æ…‹
- **ðŸ‘ï¸ï¼ˆGoodï¼‰** : è¦ªæŒ‡ã ã‘ç«‹ã¦ã¦ã€ä»–ã®æŒ‡ã‚’é–‰ã˜ãŸçŠ¶æ…‹

ã•ã‚‰ã«ã€**ä¸¡æ‰‹ã‚’èªè­˜** ã—ã€ä¸¡æ‰‹ã®ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ãŒã€Œãƒ‘ãƒ¼ã€ã ã£ãŸå ´åˆã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

## 2. å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒª
ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã™ã‚‹å‰ã«ã€ä»¥ä¸‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚
```bash
pip install opencv-python mediapipe numpy
```

---

## 3. ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å‹•ä½œã®ä»•çµ„ã¿

### (1) ä¸¡æ‰‹ã‚’èªè­˜ã™ã‚‹ãŸã‚ã®åˆæœŸåŒ–
```python
hands = mp_hands.Hands(
    static_image_mode=False,
    max_num_hands=2,
    model_complexity=0,
    min_detection_confidence=0.8,
    min_tracking_confidence=0.8
)
```
- **max_num_hands=2** â†’ **ä¸¡æ‰‹ã‚’èªè­˜å¯èƒ½**

### (2) å³æ‰‹ã‹å·¦æ‰‹ã‹ã‚’åˆ¤å®šã™ã‚‹æ–¹æ³•
```python
handedness = results.multi_handedness[idx].classification[0].label
```
MediaPipeã¯ã€æ¤œå‡ºã—ãŸæ‰‹ã® **ç¨®é¡žï¼ˆå³æ‰‹ãƒ»å·¦æ‰‹ï¼‰** ã‚’åˆ¤å®šã™ã‚‹æ©Ÿèƒ½ã‚’æŒã£ã¦ã„ã¾ã™ã€‚
- `handedness` ã®å€¤ã¯ **"Right" ã¾ãŸã¯ "Left"** ã«ãªã‚Šã€ã“ã‚Œã‚’åˆ©ç”¨ã—ã¦ **ã©ã¡ã‚‰ã®æ‰‹ã‹ã‚’åˆ¤å®š** ã—ã¾ã™ã€‚
- ãã®å¾Œã€å³æ‰‹ãƒ»å·¦æ‰‹ãã‚Œãžã‚Œã®ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã‚’è¨˜éŒ²ã—ã€ç”»é¢ã«è¡¨ç¤ºã—ã¾ã™ã€‚

### (3) å³æ‰‹ã‹å·¦æ‰‹ã‹ã‚’åˆ¤å®šã™ã‚‹æ–¹æ³•
```python
handedness = results.multi_handedness[idx].classification[0].label
```

- MediaPipeã¯ã€æ¤œå‡ºã—ãŸæ‰‹ã® **ç¨®é¡žï¼ˆå³æ‰‹ãƒ»å·¦æ‰‹ï¼‰** ã‚’åˆ¤å®šã™ã‚‹æ©Ÿèƒ½ã‚’æŒã£ã¦ã„ã¾ã™ã€‚
- `handedness` ã®å€¤ã¯ **"Right"** ã¾ãŸã¯ **"Left"** ã«ãªã‚Šã€ã“ã‚Œã‚’åˆ©ç”¨ã—ã¦ **ã©ã¡ã‚‰ã®æ‰‹ã‹ã‚’åˆ¤å®š** ã—ã¾ã™ã€‚

ãã®å¾Œã€å³æ‰‹ãƒ»å·¦æ‰‹ãã‚Œãžã‚Œã®ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã‚’è¨˜éŒ²ã—ã€ç”»é¢ã«è¡¨ç¤ºã—ã¾ã™ã€‚

### (4) 2ã¤ã®æ‰‹ã‚’ç¹°ã‚Šè¿”ã—å‡¦ç†
```python
for idx, hand_landmarks in enumerate(results.multi_hand_landmarks):
```
â†’ **å³æ‰‹ã¨å·¦æ‰‹ã®2ã¤ã®æ‰‹ã‚’1ã¤ãšã¤ç¹°ã‚Šè¿”ã—ã§å‡¦ç†** ã—ã¾ã™ã€‚

### (5) ä¸¡æ‰‹ãŒã€Œãƒ‘ãƒ¼ã€ã®å ´åˆã«ç‰¹åˆ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
```python
if left_hand_gesture == "Paper" and right_hand_gesture == "Paper":
    cv2.putText(frame, "Both Hands Paper", (10, 120), cv2.FONT_HERSHEY_SIMPLEX, 1.5, (0, 0, 255), 3, cv2.LINE_AA)
```
â†’ **ä¸¡æ‰‹ãŒãƒ‘ãƒ¼ãªã‚‰ã€ŒBoth Hands Paperã€ã¨è¡¨ç¤º**

## 4. å®Ÿè¡Œæ–¹æ³•

1. **ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã¾ãŸã¯ã‚³ãƒžãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ** ã§ä»¥ä¸‹ã®ã‚³ãƒžãƒ³ãƒ‰ã‚’å®Ÿè¡Œã€‚

```
python both_hands_gesture.py
```

1. **ã‚«ãƒ¡ãƒ©ã®å‰ã§æ‰‹ã‚’å‹•ã‹ã™** ã¨ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã€Œã‚°ãƒ¼ã€ã€Œãƒãƒ§ã‚­ã€ã€Œãƒ‘ãƒ¼ã€ã€ŒðŸ‘ï¸ã€ã‚’åˆ¤å®šã—ã¾ã™ã€‚

1. **çµ‚äº†ã™ã‚‹ã¨ãã¯ 'q'ã‚­ãƒ¼ ã‚’æŠ¼ã—ã¾ã™ã€‚**

## 5. ã¾ã¨ã‚

- **æ‰‹ã®ãƒ©ãƒ³ãƒ‰ãƒžãƒ¼ã‚¯ã‚’æ¤œå‡º** ã—ã¦ã€æŒ‡ã®å½¢çŠ¶ã‚’åˆ¤å®š
- **ã€Œã‚°ãƒ¼ã€ã€ã€Œãƒãƒ§ã‚­ã€ã€ã€Œãƒ‘ãƒ¼ã€ã€ã€ŒðŸ‘ï¸ã€ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§èªè­˜**
- **ä¸¡æ‰‹ãŒã€Œãƒ‘ãƒ¼ã€ã®å ´åˆã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º**
